(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}const n=t((function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.description=t,this.completed=n,this.index=r}));function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=[],o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o;return t=e,o=[{key:"addTask",value:function(){if(null!==localStorage.getItem("tasks")){a=JSON.parse(localStorage.getItem("tasks"));var e=document.querySelector(".input-text").value,t=a.length,r=new n(e,!1,t);a.push(r),localStorage.setItem("tasks",JSON.stringify(a)),document.querySelector(".input-text").value=""}else{a=[];var o=document.querySelector(".input-text").value,i=new n(o,!1,0);a.push(i),localStorage.setItem("tasks",JSON.stringify(a)),document.querySelector(".input-text").value=""}}},{key:"removeTask",value:function(t){if(t.target.classList.contains("remove")){t.target.parentElement.parentElement.remove();var n=JSON.parse(localStorage.getItem("tasks")),r=n.filter((function(e){return e.index!=t.target.id}));(n=r).forEach((function(e,t){e.index=t})),localStorage.setItem("tasks",JSON.stringify(n)),e.renderTasks()}}},{key:"editTask",value:function(e){var t=e.target.id,n=JSON.parse(localStorage.getItem("tasks"));e.target.innerText&&(n[t].description=e.target.innerText),localStorage.setItem("tasks",JSON.stringify(n))}},{key:"renderTasks",value:function(){var e=document.querySelector(".list");a=JSON.parse(localStorage.getItem("tasks")),e.innerHTML="",null!==JSON.parse(localStorage.getItem("tasks"))&&a.forEach((function(t){e.innerHTML+='<div class="item">\n    <div class="item__container--checkbox-text">\n    <input class="checkbox" id="'.concat(t.index,'" type="checkbox">\n    <span id="').concat(t.index,'" class="editor" contentEditable="true">').concat(t.description,'</span>\n    </div>\n    <a id="').concat(t.index,'"><i class="hide remove trash-').concat(t.index,' fa-solid fa-trash-can" id="').concat(t.index,'"></i><i class="ellipsis-').concat(t.index,' fa-solid fa-ellipsis-vertical"></i></a>\n  </div>')}))}}],null&&r(t.prototype,null),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=[],l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"getCheckedBoxes",value:function(){var e=this;document.querySelector(".clear-completed").onclick=function(){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw o}}}}(document.querySelectorAll(".checkbox"));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.checked){var a=r.id;s.push(a)}}}catch(e){n.e(e)}finally{n.f()}e.filterTasks()}}},{key:"filterTasks",value:function(){var e=JSON.parse(localStorage.getItem("tasks")),t=[];s.forEach((function(e){return t.push(Number(e))})),console.log(t),console.log(e.index);var n=e.filter((function(e){return!t.includes(e.index)}));n.forEach((function(e,t){return e.index=t})),localStorage.setItem("tasks",JSON.stringify(n)),o.renderTasks()}}],null&&c(t.prototype,null),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u=document.querySelector(".fa-arrows-rotate");window.addEventListener("DOMContentLoaded",o.renderTasks),document.querySelector(".input-text").addEventListener("keydown",(function(e){"Enter"===e.key&&(o.addTask(),o.renderTasks())}));var d=document.querySelector(".list");d.addEventListener("keypress",(function(e){e.target.classList.contains("editor")&&"Enter"===e.key&&(e.preventDefault(),o.editTask(e))})),d.addEventListener("focusin",(function(e){if(e.target.classList.contains("editor")){var t=e.target.id,n=document.querySelector(".trash-".concat(t)),r=document.querySelector(".ellipsis-".concat(t));n.classList.remove("hide"),r.classList.add("hide")}})),d.addEventListener("focusout",(function(e){if(e.target.classList.contains("editor")){o.editTask(e);var t=e.target.id,n=document.querySelector(".trash-".concat(t)),r=document.querySelector(".ellipsis-".concat(t));setTimeout((function(){n.classList.add("hide"),r.classList.remove("hide")}),1e3)}})),d.addEventListener("click",(function(e){o.removeTask(e)})),l.getCheckedBoxes(),u.addEventListener("click",(function(){location.reload()})),console.log("Production Mode")})();