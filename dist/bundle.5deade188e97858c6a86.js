(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}const n=t((function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.description=t,this.completed=n,this.index=a}));function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=[],o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o;return t=e,o=[{key:"addTask",value:function(){if(null!==localStorage.getItem("tasks")){r=JSON.parse(localStorage.getItem("tasks"));var e=document.querySelector(".input-text").value,t=r.length,a=new n(e,!1,t);r.push(a),localStorage.setItem("tasks",JSON.stringify(r)),document.querySelector(".input-text").value=""}else{r=[];var o=document.querySelector(".input-text").value,i=new n(o,!1,0);r.push(i),localStorage.setItem("tasks",JSON.stringify(r)),document.querySelector(".input-text").value=""}}},{key:"removeTask",value:function(t){if(t.target.classList.contains("remove")){t.target.parentElement.parentElement.remove();var n=JSON.parse(localStorage.getItem("tasks")),a=n.filter((function(e){return e.index!=t.target.id}));(n=a).forEach((function(e,t){e.index=t})),localStorage.setItem("tasks",JSON.stringify(n)),e.renderTasks()}}},{key:"editTask",value:function(e){var t=e.target.id,n=JSON.parse(localStorage.getItem("tasks"));e.target.innerText&&(n[t].description=e.target.innerText),localStorage.setItem("tasks",JSON.stringify(n))}},{key:"renderTasks",value:function(){var e=document.querySelector(".list");r=JSON.parse(localStorage.getItem("tasks")),e.innerHTML="",null!==JSON.parse(localStorage.getItem("tasks"))&&r.forEach((function(t){e.innerHTML+='<div class="item">\n    <div class="item__container--checkbox-text">\n    <input class="checkbox" id="'.concat(t.index,'" type="checkbox">\n    <span id="').concat(t.index,'" class="editor" contentEditable="true">').concat(t.description,'</span>\n    </div>\n    <a id="').concat(t.index,'"><i class="hide remove trash-').concat(t.index,' fa-solid fa-trash-can" id="').concat(t.index,'"></i><i class="ellipsis-').concat(t.index,' fa-solid fa-ellipsis-vertical"></i></a>\n  </div>')}))}}],null&&a(t.prototype,null),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=[],s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"getCheckedBoxes",value:function(){var e=this;document.querySelector(".clear-completed").onclick=function(){document.querySelectorAll(".checkbox").forEach((function(e){if(!0===e.checked){var t=e.id;c.push(t)}})),e.filterTasks()}}},{key:"filterTasks",value:function(){var e=JSON.parse(localStorage.getItem("tasks")),t=[];c.forEach((function(e){return t.push(Number(e))}));var n=e.filter((function(e){return!t.includes(e.index)}));n.forEach((function(e,t){return e.index=t,e.index})),localStorage.setItem("tasks",JSON.stringify(n)),o.renderTasks(),c=[]}},{key:"changeListener",value:function(){document.querySelector(".list").onchange=function(){var e=document.querySelectorAll(".checkbox"),t=JSON.parse(localStorage.getItem("tasks"));e.forEach((function(e){var n=e.id;e.checked?t[n].completed=!0:t[n].completed=!1})),localStorage.setItem("tasks",JSON.stringify(t))}}}],null&&i(t.prototype,null),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),l=document.querySelector(".fa-arrows-rotate");window.addEventListener("DOMContentLoaded",o.renderTasks),document.querySelector(".input-text").addEventListener("keydown",(function(e){"Enter"===e.key&&(o.addTask(),o.renderTasks())}));var u=document.querySelector(".list");u.addEventListener("keypress",(function(e){e.target.classList.contains("editor")&&"Enter"===e.key&&(e.preventDefault(),o.editTask(e))})),u.addEventListener("focusin",(function(e){if(e.target.classList.contains("editor")){var t=e.target.id,n=document.querySelector(".trash-".concat(t)),a=document.querySelector(".ellipsis-".concat(t));n.classList.remove("hide"),a.classList.add("hide")}})),u.addEventListener("focusout",(function(e){if(e.target.classList.contains("editor")){o.editTask(e);var t=e.target.id,n=document.querySelector(".trash-".concat(t)),a=document.querySelector(".ellipsis-".concat(t));setTimeout((function(){n.classList.add("hide"),a.classList.remove("hide")}),1e3)}})),u.addEventListener("click",(function(e){o.removeTask(e)})),s.getCheckedBoxes(),l.addEventListener("click",(function(){window.location.reload()})),s.changeListener()})();